# 语法、语句和操作符

每一门语言都有其最基本的核心概念，JavaScript也不例外，这里，之所以将语法、语句和操作符放在一起整理，第一是因为它们都是ECMAScript的组成部分之一；其次则是它们的概念知识相对较少且固定；最后则是因为它们是了解一门语言的根本基础之一。

## 在梳理之前

在整理之前，我们先来对ECMAScript的关键字和保留字作相应的了解。关键字就是一组具有特定用途的文字，不能用作标识符；保留字则意味着这些字在本门语言中虽然没有特定用途，但是在将来可能被用作关键字，因此也不能用作标识符。[JavaScript目前关键字与保留字](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Reserved_words)

******

## 一、语法

### 区分大小写
JavaScript严格区分大小写。

### 标识符
标识符指变量、函数、属性的名字，或者函数的参数。
* 标识符的第一个字符必须是一个**字母**、**下划线**或**美元符号**。
* 其他字符可以是字母、下划线、美元符号或者数字。

### 注释
单行注释与多行注释

### 严格模式
ES5新增引入

### 语句
语句以分号结尾。语句部分会详细介绍，这里解释语句的一些不常见的语法规则

#### 语句和表达式
> 拿我们的母语来说，语句相当于句子，表达式相当于短语，运算符相当于标点符号和连接词。

语句和表达式都有结果值，语句有声明语句和赋值表达式两种。

语句都会有一个结果值，这就是经常在控制台看到输出underfined的原因，因为这是var的结果值。

代码块的结果值是最后一个语句或表达式的结果，如同一个隐式的返回。

语法不允许我们获得语句的结果值并将其赋值给另一个变量，但可以使用eval（）获得，不过不推荐。

大部分表达式都没有副作用,例如：
```javascript
var a = 2;
var b = a + 3,
表达式a+3本身没有副作用（改变a的值）。但它的结果值为5。
```
但是有些表达式还是有副作用，例如：
```javascript
1、函数调用
function foo(){
	a = a + 1;
}
var a = 1;
foo(); //结果值：undefined。副作用：a的值被改变。

2、一元运算符++和--
var a = 42;
var b = a++; //a++副作用（将a递增）产生在表达式返回结果值之后，这里值得注意；++a则在之前。--a和a--同理。TIPS：逗号运算符解决a++的副作用

3、delete运算符
delete obj.a; //副作用是属性被从对象中删除,结果值是true或false。

4、赋值运算符=
var a;
a = 42; //结果值是42，副作用是将42赋给a。 TIPS:链式赋值的作用。
```

#### 上下文规则
> 在JavaScript语法规则中，有时候同样的语法在不同的情况下会有不同的解释。

一些常见情况：
```JavaScript
1、大括号
(1)对象常量
var a = {
	foo:bar()
}
(2)标签
{
	foo:bar()
}
(3)JSON
{
	"a":42
}

2、代码块
[] + {}; //"[object object]"
{} + []; //0，以上涉及强制类型转换

3、对象解构
{...} 

4、else if和可选代码块
JavaScript并没有else if的用法，这只是一种简单的代码省略创造出来的简单用法。

```

******

## 二、语句

> 正如前面所说的，语句就犹如我们日常与他人交谈时使用的句子一样，句子起的作用是让别人来理解我所要表达的意思，而语句则是要让计算机来明白我们的意思以便和我们做出“交流”。这里着重介绍的是流程控制语句，也就如同平时别人评价你说话时说你句子有没有逻辑性、条理性，流程控制语句起的就是这么一个作用。

JavaScript语句分类：
* if语句
* do-while语句
* while语句
* for语句
* for-in语句
* label语句
* break和continue语句
* with语句
* switch语句

### if语句
if语句是常用的条件判断语句，这里值的注意的有两点：

1. 条件里的表达式会自动调用Boolean()函数进行转换。
2. 若只有一行代码，则可以省略代码块，不过最好还是不省略，方便阅读。

### do-while语句
```js
var i = 0;
do{
	i +=2;
}while(i < 10); //do-while语句始终会执行一次
```

### while语句
while语句属于前测试循环语句，循环体的代码有可能永远不会执行。

### for语句
for语句是常用的循环语句，和while很类似，修改控制表达式可以和while达到相同的效果。

### for-in语句
迭代语句，常用于枚举对象的属性，这里值的注意的有两点：

1. for-in遍历的属性顺序是不可预测的。
2. 若迭代的属性值为null或undefined，将忽略，因此在迭代前需要加以检测。

### label语句
```js
label: statement;
使用label在代码中添加标签，方便由break或continue语句引用，实现跳转；lablel语句要与for等循环语句一起使用
```

### break与continue语句
break会强制退出循环执行循环语句后的代码，continue语句会跳出当前循环进入下一次循环。

与label标签使用时，break label将跳出指定label标签循环语句，continue label将跳入指定label标签循环语句。

### with语句
将代码的作用域设置到一个特定的对象，简化书写，但会造成性能下降。

### switch语句
switch语句与if语句功能有些相似，但在某些方面极大简化了重复的if语句编码
```js
switch(expression){
	case value: statement
		break;
	case value: statement
		break;
	default: statement
}
```
switch语句可以使用任何数据类型，case值可以是常量、变量也可以是表达式。

******

## 操作符
> 操作符是一组用于操作数据值的符号，相当于我们与人交流时的标点符号与连接词，计算机通过操作符来明白我们对不同语句或表达式的操作。

JavaScript操作符分为：

* 一元操作符
* 位操作符
* 布尔操作符
* 乘性操作符
* 加性操作符
* 关系操作符
* 关系操作符
* 相等操作符
* 条件操作符
* 赋值操作符
* 逗号操作符

### 一元操作符
> 一元操作符是最简单的操作符，分为递增递减操作符和一元加减操作符

1、递增和递减操作符分为前置与后置型，前置递增操作符表示在求值之前改变表达式，后置则相反。

这四个对任何值都适用，因此，就出现了强制类型转换。规则：
1. 对字符串，包含有效数字字符的，将其转换为数字，再执行递增递减操作；不包含有效数字字符的，变量值为NaN。
2. 对布尔值，false转为数值0，true转为数值1，再递增递减。
3. 对浮点数，执行递增递减。
4. 对对象，先调用对象的valueOf（）方法取得一个可操作的值，然后应用上述规则。若结果为NaN，则再调用toString（）方法后再应用上述规则。

2、一元加减操作符，+号放在数值前时，将不会产生影响，若放在非数值前时，将会对其进行强制类型转换。-号主要表示负数，放在非数值前时，和+号应用一样的规则。

（tips：关于强制类型转换，后面再有论述，精粹的作者说，强制转换是糟粕，不过啥东西也要辩证看嘛，有好也有坏，这里我就比较赞同你不知道的JavaScript的作者的观点了。后面的强转的知识也是对他书本的总结）

### 位操作符

暂且不表

### 布尔操作符
> 我们常用布尔操作符来对if和循环语句进行判断，布尔操作符的可谓是及其重要的，掌握布尔操作符，也可以比较神操作的简化某些判定。

布尔操作符包括三种：**逻辑非**、**逻辑与**和**逻辑或**。

#### 逻辑非
逻辑非由！表示，可以应用于JavaScript中的任何值，除了以下五种值外，其他任何值都返回false：

* 空字符串
* 数值0
* null
* NaN
* undefined

同时使用两个逻辑非'!!'和使用'Boolean()'函数相同。

#### 逻辑与
逻辑与由&&表示，可应用于JavaScript中的任何值。当两个操作数都为布尔值，且都为true才返回true，否则返回false；当其中一个操作数不为布尔值，则应用下列规则：

* 第一个操作数是对象，返回第二个操作数
* 第二个操作数是对象，只有第一个操作数为true才返回该对象
* 两个操作数都是对象，则返回第二个操作数
* 第一个操作数是null，返回null
* 第一个操作数是NaN，返回NaN
* 第一个操作数是undefined，返回undefined

逻辑与是短路操作，第一个为false，则不会再执行第二个了。

#### 逻辑或
逻辑或由||表示，和逻辑与差不多。当两个操作数都为布尔值，且有一个操作数为true时则返回true；当其中一个操作数不为布尔值，应用下列规则：

* 第一个操作数是对象，返回第一个
* 第一个操作数的求值结果为false，返回第二个操作数
* 两个操作数都是对象，返回第一个
* 两个操作数都是null，返回null
* 两个操作数都是NaN，返回NaN
* 两个操作数都是undefined，返回undefined

逻辑或也是短路操作符，不同的是当第一个为true时，就不会执行第二个了。经常会使用逻辑与进行门操作。

### 乘性操作符
JavaScript中乘性操作符包括三种，**乘法**、**除法**和**求模**，非数值的操作数参与乘性操作符运算，将会进行自动类型转换。

#### 乘法
规则：

* 操作数都为数值，则正常计算，正负看情况。若乘积超过了表示范围，则返回Infinity或-Infinity
* 有操作数为NaN，结果NaN
* Infinity与0相乘，结果NaN
* Infinity与非0数值相乘，结果为Infinity或-Infinity
* Infinity与Infinity相乘，结果为Infinity
* 若有操作数不是数值，则隐式调用Number（）进行转换，再应用以上规则

#### 除法
规则：

* 操作数都为数值，则正常计算，正负看情况。若商超过了表示范围，返回Infinity或-Infinity
* 有操作数为NaN，结果NaN
* 若Infinity被Infinity除，结果为NaN
* 若零被零除，结果为NaN
* 若非零的有限数被零除，结果为Infinity或-Infinity
* 若Infinity被任何非零数值除，结果为Infinity或-Infinity
* 若有操作数不是数值，则隐式调用Number（）进行转换，再应用以上规则

#### 求模
规则：

* 操作数都为数值，则正常计算
* 若被除数是无穷大值而除数是有限大的数值，结果为NaN
* 若被除数是有限大的数值而除数是零，结果为NaN
* 若Infinity被Infinity除，结果是NaN
* 若被除数是有限大的数值而除数是无穷大的数值，则结果是被除数
* 若被除数是零，则结果是零
* 若有操作数不是数值，则隐式调用Number（）进行转换，再应用以上规则