# 对象
> 在类型部分中，我们谈到了对象，对象是JavaScript中的一种语言类型，也被称为复杂数据类型或引用数据类型。“无序属性的集合，其属性可以包含基本值、对象或者函数”，这是对象的定义。我们已经了解了很多种对象，像数组、正则、日期、还有熟悉的基本包装类型的字符串对象，这些都是内置对象；除此之外，还有开发人员自定义的对象。

准确的来说，JavaScript中，对象一共有以下几种类型，简称为内置对象。
* String
* Number
* Boolean
* Object
* Function
* Array
* Data
* RegExp
* Error

标准的创建对象的形式有两种，一种是new 构造函数的方式创造出一个对象实例再添加方法属性；另一种则是对象字面量的方式。通常情况下我们使用第二种。

## 对象的属性与方法
属性就是一些存储在特定命名位置的（任意类型）的值组成的对象的内容。而当对象的属性是一个函数时，我们就将其称为方法。

**实际上**，并不存在一个区别于对象属性的对象方法存在，无论返回值是什么类型，每次访问对象的属性就是属性访问。但是，由于其他面向对象语言具有“类”、“方法”等的称呼，加上JavaScript的语法规范也对此有所区别，因此我们还是将访问对象的方式分为两种：属性访问与方法访问。要记住的是，技术上，并不存在函数作为方法属于一个对象，函数是一等公民，函数与对象的关系只是间接关系。

### 属性的一些特征
要访问对象上的某个属性，我们可以采取两种方式，一是`.操作符`，二是`[]操作符`。前者被称为属性访问，后者被称为键访问，二者的区别在于点操作符要求属性名满足标识符的命名规范，而中括号语法可以接收任意UTF-8/Unicode字符串作为属性名。

属性名永远都是字符串，尽管传递数值类型，也会被转换成字符串形式的数字。ES6同时新增了可计算属性名支持。

这里需要区别的是与数组对象的关系，数组也是对象，因此也可以添加属性，但是当添加的属性类似数字时，将会变成修改数组的内容而不是添加一个属性。

### 属性描述符

#### 复制对象
通常情况下，复制对象并不像我们想象中的那么简单。复制对象的方式分为浅复制和深复制两种方式。

浅复制是指在复制一个对象时，遍历所有可枚举的自有键，对基本类型的属性值复制相同的一份内容，而对引用类型的属性值则只复制一份相同的引用；而深复制则是指不管对象属性值是基本数据类型还是引用数据类型，都完完全全的复制一份相同的内容，这种复制方式容易造成循环引用，从而导致死循环。对于浅复制，ES6对其支持了`Object.assign(目标对象，源对象)`方法，进行快速复制。

#### 描述符
从ES5开始，所有属性都具备了属性描述符，用来定义属性的具体特性。属性分为两种，**数据属性** 和 **访问器属性**。

##### 数据属性
数据属性包含一个数据值的位置，在这个位置可以读取和写入值，同时它有四个描述其行为的特性。

* value
* writeable
* configurable
* enumerable

可以使用`Object.defineProperty(对象，属性，特性)`来新增或修改一个属性的特性。

value是属性的值，writeable决定属性的值是否可修改，configurable决定属性是否可配置（配置为false是单向操作且禁止删除），enumerable决定属性是否出现在对象的可枚举属性中，即是否可用for...in循环遍历。

###### 属性不变性
有时候为了实现属性是不可变的（浅不变性），就需要额外定义属性的特性来实现效果。
* 对象常量 writable:false,configurable:false
* 禁止扩展 Obeject.preventExtensions()
* 密封 Obeject.seal(在禁止扩展基础上配置configurable:false)
* 冻结 Obeject.freeze(在密封基础上配置writable:false)

##### 访问器属性
属性分为两种，数据属性还好理解，就是一个简单的包含了数据值的属性，而访问器属性则相对难以理解，二者之间的区别在哪儿呢？

通常来说，当我们访问属性时，会有一个get操作，引擎会自动去获取与所查找名称相同的属性；而当我们访问属性同时又设置了一个值时，这个时候会有一个put操作来设置或创建这个属性，put不同于get只是去进行简单查找操作，它会进行相对复杂的算法工作，
* 若属性是访问器属性，并存在setter则调用setter进行值的设置
* 若属性是数据属性，并且writable特性为false，则非严格模式下静默失败，严格模式下TypeError
* 若都不是，则将该值设置为属性的值
* 若对象中不存在此属性，则put操作会进行更加复杂的计算，这个时候就引出了原型与原型链

当给一个属性定义getter,setter或者两者都有时，这个属性会被定义为访问器属性，对于访问器属性来说，JavaScript会忽略它们的value和writable特性，取代之的是关心set和get特性，这和数据属性的四个特性是不同的。

* set
* get
* configurable
* enumerable

get和set一般都是成对出现设置的。同时，还有一次定义多个描述符属性的方法`Obeject.defineProperties(源对象，修改特性构成的对象)`，以及获取属性特性的方法`Object.getOwnPropertyDescriptor(属性所在对象，属性名称)`

#### 枚举与遍历

`in操作符`检查属性是否在对象及其原型链中，而`hasOwnProperty()`方法只会检测属性是否在对象中。

枚举的方式有多种：

* for...in循环
* prepertyIsEnumerable()
* object.keys()
* object.getOwnPropertyNames()

当我们采用for...in进行遍历时，只会遍历数组下标或者对象属性，遍历获取属性值可以采用forEach(),every(),some()或者for...of
